PURPOSE:

In scenarios where customer orders are missed or not scheduled for delivery, an Error Van is allocated to fulfill those unscheduled orders. To support this recovery process:

A Couchbase query is executed to extract all unscheduled orders from the database by using query.txt file

The result of this query is exported as a CSV file, which contains all relevant information about the orders, including F_TRIP_ID (trip ID).

This CSV file is converted into a structured JSON format using an automated Java or Shell script.

During the conversion:

JSON files are generated based on F_TRIP_ID, meaning each unique trip ID results in one JSON file.

If multiple orders share the same trip ID, they are grouped into a single JSON file containing multiple stops (orders) within the trip.

The generated JSON files are then republished to a Kafka topic, enabling downstream systems to reprocess and schedule these orders for delivery via the allocated error van.

This ensures a reliable and automated mechanism for identifying missed orders and reassigning them for delivery, minimizing customer impact.